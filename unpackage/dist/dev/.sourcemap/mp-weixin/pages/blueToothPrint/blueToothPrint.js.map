{"version":3,"sources":["webpack:///D:/wangzichi/trypressure/pressure/main.js","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?d289","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?0706","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?44cf","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?eb7f","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?1a9a","webpack:///D:/wangzichi/trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue?efaa"],"names":["createPage","Page","bluetooth","Bluetooth","components","data","baseUrl","$common","printdata","isOpenBle","devicesList","serviceList","deviceId","canvas_width","canvas_height","year","Date","getFullYear","week","getDay","month","getMonth","day","getDate","avatar","uni","getStorageSync","username","onUnload","closeBLEConnection","closeBluetoothAdapter","onLoad","option","JSON","parse","openBluetoothAdapter","methods","startBluetoothDeviceDiscovery","showLoading","title","self","setTimeout","startBluetoothDevicesDiscovery","success","res","onBluetoothDeviceFound","devices","console","log","stringify","some","item","push","fail","hideLoading","showToast","err","stopBluetoothDevicesDiscovery","select_deviceId","setStorageSync","createBLEConnection","result","getBLEDeviceServices","result2","select_service","serviceId","uuid","getBLEDeviceCharacteristics","pickUpOnce","notifyBLECharacteristicValue","writeBLECharacteristicValue","timess","printlength","length","printerJobs","PrinterJobs","print","util","formatTime","printerUtil","fillLine","inline","setSize","println","i","createtime","l","r","buffer","printbuffs","maxChunk","delay","j","byteLength","subPackage","slice","printbuff","get_Qrcode","Promise","resolve","reject","ctx","createCanvasContext","clearRect","canvasId","text","String","width","height","callback","e","canvasGetImageData","x","y","zip_image","back","navigateBack","delta"],"mappings":"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","file":"pages/blueToothPrint/blueToothPrint.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/blueToothPrint/blueToothPrint.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./blueToothPrint.vue?vue&type=template&id=d6877412&\"\nvar renderjs\nimport script from \"./blueToothPrint.vue?vue&type=script&lang=js&\"\nexport * from \"./blueToothPrint.vue?vue&type=script&lang=js&\"\nimport style0 from \"./blueToothPrint.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"trypressure/pressure/pages/blueToothPrint/blueToothPrint.vue\"\nexport default component.exports","export * from \"-!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blueToothPrint.vue?vue&type=template&id=d6877412&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.devicesList, function(item, index) {\n    var g0 = Math.max(100 + item.RSSI, 0)\n    return {\n      $orig: _vm.__get_orig(item),\n      g0: g0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blueToothPrint.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blueToothPrint.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PrinterJobs from '@/common/print/printerjobs.js'\nimport printerUtil from '@/common/print/printerutil.js'\nimport util from '@/common/print/util.js'\nimport drawQrcode from '@/common/print/weapp.qrcode.esm.js'\nimport Bluetooth from '@/common/print/bluetooth.js'\n\nlet bluetooth = new Bluetooth();\n\nexport default {\n\tcomponents: {},\n\tdata() {\n\t\treturn {\n\t\t\tbaseUrl: this.$common.baseUrl,\n\t\t\t// 选中打印数据数组\n\t\t\tprintdata:[],\n\t\t\tisOpenBle: false, //是否已经打开蓝牙，默认为false\n\t\t\tdevicesList: [], //设备列表\n\t\t\tserviceList: [], //服务列表\n\t\t\tdeviceId: \"\", //选中的deviceId\n\t\t\tcanvas_width: 240,\n\t\t\tcanvas_height: 240,\n\t\t\tyear: new Date().getFullYear(),\n\t\t\tweek: ['日', '一', '二', '三', '四', '五', '六'][new Date().getDay()],\n\t\t\tmonth: new Date().getMonth() + 1,\n\t\t\tday: new Date().getDate(),\n\t\t\tavatar: uni.getStorageSync('userinfo').avatar,\n\t\t\tusername: uni.getStorageSync('userinfo').username,\n\t\t}\n\t},\n\t//页面卸载是关闭蓝牙链接\n\tonUnload() {\n\t\tbluetooth.closeBLEConnection();\n\t\tbluetooth.closeBluetoothAdapter();\n\t},\n\t//页面打开,获取位置,打开蓝牙链接\n\tonLoad(option) {\n\t\t\n\t\t// console.log(JSON.parse(option.printdata))\n\t\tthis.printdata = JSON.parse(option.printdata)\n\t\t// for(var i=0;i<=this.printdata.length;i++){\n\t\t// \tconsole.log(this.printdata[i].createtime)\n\t\t// \tconsole.log(this.printdata[i].l+''+this.printdata[i].r)\n\t\t// }\n\t\t\n\t\t// uni.getLocation({\n\t\t// \ttype: 'wgs84',\n\t\t// \tsuccess: function(res) {\n\t\t// \t\tconsole.log('当前位置的经度：' + res.longitude);\n\t\t// \t\tconsole.log('当前位置的纬度：' + res.latitude);\n\t\t// \t}\n\t\t// });\n\n\t\tbluetooth.openBluetoothAdapter();\n\n\t},\n\tmethods: {\n\n\t\t//搜索周边设备\n\t\tstartBluetoothDeviceDiscovery() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '蓝牙搜索中'\n\t\t\t})\n\n\t\t\tlet self = this;\n\t\t\tself.devicesList = [];\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tuni.onBluetoothDeviceFound(devices => {\n\t\t\t\t\t\t\tconsole.log(\"发现设备: \" + JSON.stringify(devices));\n\t\t\t\t\t\t\t//不重复,就添加到devicesList中,\n\t\t\t\t\t\t\tif (!self.devicesList.some(item => {\n\t\t\t\t\t\t\t\t\treturn item.deviceId === devices.devices[0].deviceId\n\t\t\t\t\t\t\t\t})) {\n\t\t\t\t\t\t\t\tself.devicesList.push(devices.devices[0])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfail: res => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tself.showToast(`搜索设备失败` + JSON.stringify(err));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}, 200)\n\t\t},\n\n\t\t//停止搜索蓝牙设备\n\t\tstopBluetoothDevicesDiscovery() {\n\t\t\tuni.hideLoading();\n\t\t\tbluetooth.stopBluetoothDevicesDiscovery();\n\t\t},\n\n\n\t\t//选中设备\n\t\tasync select_deviceId(item) {\n\t\t\tthis.deviceId = item.deviceId;\n\t\t\tbluetooth.deviceId = item.deviceId;\n\t\t\tuni.setStorageSync('deviceId', bluetooth.deviceId);\n\t\t\t\n\t\t\tthis.serviceList = [];\n\n\t\t\ttry {\n\t\t\t\t//1.链接设备\n\t\t\t\tlet result = await bluetooth.createBLEConnection();\n\t\t\t\t//2.寻找服务\n\t\t\t\tlet result2 = await bluetooth.getBLEDeviceServices();\n\n\t\t\t\tconsole.log(\"获取服务: \" + JSON.stringify(result2));\n\n\t\t\t\tthis.serviceList = result2;\n\t\t\t\tconsole.log(this.serviceList,'获取设备')\n\t\t\t\tthis.select_service(this.serviceList[1])\n\t\t\t} catch (e) {\n\t\t\t\t//TODO handle the exception\n\t\t\t\tconsole.log(\"e: \" + JSON.stringify(e));\n\t\t\t}\n\t\t},\n\n\t\t//选中服务\n\t\tasync select_service(res) {\n\n\t\t\tbluetooth.serviceId = res.uuid;\n\t\t\tuni.setStorageSync('serviceId', res.uuid);\n\n\t\t\ttry {\n\t\t\t\tlet result = await bluetooth.getBLEDeviceCharacteristics();\n\t\t\t} catch (e) {\n\t\t\t\t//TODO handle the exception\n\t\t\t\tconsole.log(\"e: \" + JSON.stringify(e));\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t//打印一次\n\t\tpickUpOnce() {\n\t\t\tbluetooth.notifyBLECharacteristicValue();\n\t\t\tlet self = this;\n\t\t\tsetTimeout(() => {\n\t\t\t\tself.writeBLECharacteristicValue();\n\t\t\t}, 500);\n\t\t},\n\n\n\n\t\t//写入控制命令\n\t\tasync writeBLECharacteristicValue() {\n\n\t\t\tvar timess = this.printdata\n\t\t\tvar printlength = this.printdata.length\n\t\t\tlet printerJobs = new PrinterJobs();\n\t\t\tprinterJobs\n\t\t\t\t.print(util.formatTime(new Date()))\n\t\t\t\t.print(printerUtil.fillLine())\n\t\t\t\t.print(printerUtil.inline('NAME', '傻逼张峰'))\n\t\t\t\t.print(printerUtil.inline('DATE', util.formatTime(new Date())))\n\t\t\t\t.print(printerUtil.fillLine())\n\t\t\t\t.setSize(2, 2)\n\t\t\t\t// .print(printerUtil.inline('TIME\tL','R'))\n\t\t\t\t.print('TIME    L    R')\n\t\t\t\t// .setSize(1, 1)\n\t\t\t\t//  .print('10:23:15\t23\t')\n\t\t\t\t//  .print('10:23:15\t \t  26')\n\t\t\t\t//  .print(`${timess}\t \t  26`)\n\t\t\t\t//  .print(timess+'\t \t  26')\n\t\t\t\t// .print(printerUtil.inline('10：23：15', '23',''))\n\t\t\t\t\n\t\t\t\t// .setAlign('ct')\n\t\t\t\t// .setSize(2, 2)\n\t\t\t\t// .print('#20外卖111')\n\t\t\t\t// .setSize(1, 1)\n\t\t\t\t// .print('切尔西Chelsea')\n\t\t\t\t// .setSize(2, 2)\n\t\t\t\t// .print('在线支付(已支付)')\n\t\t\t\t// .setSize(1, 1)\n\t\t\t\t// .print('订单号：5415221202244734')\n\t\t\t\t// .print('下单时间：' + util.formatTime(new Date()))\n\t\t\t\t// .setAlign('lt')\n\t\t\t\t// .print(printerUtil.fillAround('一号口袋'))\n\t\t\t\t// .print(printerUtil.inline('意大利茄汁一面 * 1', '15'))\n\t\t\t\t// .print(printerUtil.fillAround('其他'))\n\t\t\t\t// .print('餐盒费：1')\n\t\t\t\t// .print('[赠送康师傅冰红茶] * 1')\n\t\t\t\t// .print(printerUtil.fillLine())\n\t\t\t\t// .setAlign('rt')\n\t\t\t\t// .print('原价：￥16')\n\t\t\t\t// .print('总价：￥16')\n\t\t\t\t// .setAlign('lt')\n\t\t\t\t// .print(printerUtil.fillLine())\n\t\t\t\t// .print('备注')\n\t\t\t\t// .print(\"无\")\n\t\t\t\t// .print(printerUtil.fillLine())\n\t\t\t\t.println();\n\t\t\t\tfor(var i=0;i<printlength;i++){\n\t\t\t\t\tprinterJobs\n\t\t\t\t\t.setSize(1, 1)\n\t\t\t\t\t.print(`${timess[i].createtime}\t${timess[i].l}\t  ${timess[i].r}`)\n\t\t\t\t}\n\t\t\t\tprinterJobs\n\t\t\t\t.print(\"\")\n\t\t\t\t.print(\"\")\n\t\t\t\t.print(\"\")\n\t\t\t\t.print(\"\")\n\t\t\tlet buffer = printerJobs.buffer();\n\t\t\t\n\t\t\tthis.printbuffs(buffer);\n\t\t},\n\n\t\tprintbuffs(buffer) {\n\t\t\t// 1.并行调用多次会存在写失败的可能性\n\t\t\t// 2.建议每次写入不超过20字节\n\t\t\t// 分包处理，延时调用\n\t\t\tconst maxChunk = 20;\n\t\t\tconst delay = 20;\n\t\t\tfor (let i = 0, j = 0, length = buffer.byteLength; i < length; i += maxChunk, j++) {\n\t\t\t\tlet subPackage = buffer.slice(i, i + maxChunk <= length ? (i + maxChunk) : length);\n\t\t\t\tsetTimeout(this.printbuff, j * delay, subPackage);\n\t\t\t}\n\t\t},\n\n\t\tprintbuff(buffer) {\n\t\t\tbluetooth.writeBLECharacteristicValue(buffer);\n\t\t},\n\n\t\tget_Qrcode() {\n\t\t\tlet self = this;\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst ctx = uni.createCanvasContext('shareCanvas');\n\t\t\t\tconsole.log(self.canvas_width);\n\t\t\t\tctx.clearRect(0, 0, self.canvas_width, self.canvas_height);\n\n\t\t\t\tdrawQrcode({\n\t\t\t\t\tcanvasId: 'shareCanvas',\n\t\t\t\t\ttext: String('xiaonibaba.com'),\n\t\t\t\t\twidth: self.canvas_width,\n\t\t\t\t\theight: self.canvas_height,\n\t\t\t\t\tcallback(e) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconsole.log(self.canvas_width);\n\t\t\t\t\t\t\t// 获取图片数据\n\t\t\t\t\t\t\tuni.canvasGetImageData({\n\t\t\t\t\t\t\t\tcanvasId: 'shareCanvas',\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\twidth: self.canvas_width,\n\t\t\t\t\t\t\t\theight: self.canvas_height,\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tresolve(util.zip_image(res));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tback() {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t})\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blueToothPrint.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blueToothPrint.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1597642406168\n      var cssReload = require(\"D:/wangzichi/Hbuild2.5.16/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}